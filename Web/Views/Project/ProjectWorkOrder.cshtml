@{
    ViewData["Title"] = "ProjectWorkOrder";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js"></script>   
<style>
    .select2-container 
    .select2-selection--single{
        height:35px;
    }
</style>

    <link rel="stylesheet" href="~/css/projects.css" />
        <div class="main-card mb-3 card">
         <div class="card-body">
             <h5 class="card-title">Work Order </h5>
            <div id="workOrder"> 
            <div> 
                <form v-if="seen" class="p-2"  v-on:submit.prevent="SubmitWorkOrder();return false" >
                    <p v-if="errors.length">
                        <b class="text-danger">Please correct the following error(s):</b>
                    <ul>
                        <li v-for="error in errors" class="text-danger">{{ error }}</li>
                    </ul>
                    </p>

                    <div class="position-relative form-group">
                         <div class="form-row">
                        <div class="col-md-6 col-lg-6">
                            <label for="exampleEmail" class=""> Project </label>
                            <select id="wrkProject" v-model="project" class="form-control">
                                <option :value="0" > Please select a project </option>
                                <option v-for="prjt in projects" :value="prjt.id">
                                    {{ prjt.name }}
                                </option>
                           </select>
                      </div>
                           <div class="col-md-6 col-lg-6">
                            <label for="wrkCompany" class=""> Company </label>
                            <select id="wrkCompany"  v-model="comapny"  class="form-control ">
                                <option :value="0"> Please select a project </option>
                                <option v-for="cmp in companies" :value="cmp.id">
                                    {{ cmp.name }}
                                </option>
                           </select>

                      </div>
                      </div>

                <table id="allProject"  style="display:none">
                </table>
              </div>

                    <div class="position-relative form-group">
                           <div class="form-row mt-3">
                                 <div v-if="isName" class =" col-md-6 col-sm-6 col-lg-6">
                                    <label  for="workorder" class=""> Work order name  </label>
                                    <input name="workorder" placeholder="Work order name" class="form-control" v-model="name" >
                                </div>


                                <div class =" col-md-6 col-sm-12 col-lg-6">
                                    <label for="consecutiveWork" class=""> Consecutive  Work  </label>
                                    <input name="consecutiveWork"  placeholder="Consecutive  Work" class="form-control" v-model="consecutiveWork" >
                                </div>

                                 <div class =" col-md-6 col-sm-6 col-lg-6">
                                    <label  for="budget" class=""> Original Budget  </label>
                                    <input name="budget" placeholder="$ 0" class="form-control" v-model="budget" v-on:keypress="isNumber($event)"  v-on:blur="formatNumber" >
                                </div>

                            </div>

                          <div class="form-row mt-3">
                               
                                 <div class =" col-md-6 col-sm-6 col-lg-6">
                                    <label  for="startDate" class=""> Start Date  </label>
                                    <input name="startDate" type="date"  placeholder="" v-model="startDate" class="form-control">
                                </div>

                                 <div class =" col-md-6 col-sm-6 col-lg-6">
                                    <label  for="endDate" class=""> End Date  </label>
                                    <input name="endDate" type="date"  placeholder="" v-model="endDate" class="form-control">
                                </div>
                         </div>

                         <div class="form-row mt-2">
                               <label for="exampleText" class="">  Description    </label>
                               <textarea name="text"  class="form-control" v-model="description" > </textarea>
                         </div>
                    </div>
                    <button type="submit" class="mt-1 btn btn-primary"> <strong> <i class='fa fa-save'></i> <span id="spSaveUpdate"> Submit </span>  </strong> </button>
                </form>

                  <div class="col-md-3">
                    <button v-on:click="seen = !seen" type="button" class="btn btn-outline-warning mt-4">
                        <i v-if="!seen" class="pe-7s-plus"> </i> 
                        <i v-if="seen" class="pe-7s-less"> </i>
                          Work Order  
                    </button>
                </div>

            </div>

      <div class="mb-3">
      <div class="card-body">
                <h5 class="card-title">Work order list </h5>
                <table id="allWorkOrder" class="table table-striped table-bordered" style="width:100%">
                <thead>
                <tr>
                    <th>SL</th>
                    <th>Project Name</th>
                    <th>Work Order No</th>
                    <th> Work Order</th>
                    <th> Start Date</th>
                    <th> End Date</th>
                    <th>O. Budget</th>
                    <th>A. Budget</th>
                    <th> Acction</th>
               
                </tr>
                </thead>
                <tbody>
                <tr v-for="(wrk,index) in workOrders" :key="wrk.id">
                    <td>{{index+1}}</td>
                    <td>{{wrk.projectName}}</td>
                    <td>{{wrk.workOrderNo}}</td>
                    <td>{{wrk.consecutiveWork}}</td>
                    <td>{{wrk.startDateStr}}</td>
                    <td>{{wrk.endDateStr}}</td>
                    <td>{{wrk.originalBudget}}</td>
                    <td>{{wrk.approvedBudget}}</td>
                    <td> 
                        <button type="button" v-on:click="showCompanyByClient(client)" class="btn btn-outline-info btn-sm">
                            <i class="metismenu-icon pe-7s-door-lock"></i> Details
                        </button>  </td>
                </tr>
        
                </tbody>

           
              </table>
          </div>

     </div>
   </div>

         </div>
            <script src="~/views/Workorder.js"></script>
        </div>
 

  


  

