
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div>
    <link rel="stylesheet" href="~/css/projects.css" />
        
        <div class="main-card mb-3 card">
            <div class="card-body">
	        <h5 class="card-title">Clinet</h5>
                <div class="row"> </div>
               <form  id="app" v-on:submit.prevent="submitForm" method="post" novalidate="true">
                  <p v-if="errors.length">
                    <b>Please correct the following error(s):</b>
                    <ul>
                      <li v-for="error in errors">{{ error }}</li>
                    </ul>
                  </p>
                      <div class="form-row">
                            <div class="col-md-6">
                                    <div class="position-relative form-group">
                                        <label for="name" class="">Name</label>
                                        <input name="name" id="name" placeholder="Name"  type="text" class="form-control" v-model="name">
                                    </div>
                            </div>
                            <div class="col-md-6">
                                <div class="position-relative form-group">
                                    <label for="email" class="">Contact Name</label>
                                    <input name="contactName" id="contactName" placeholder="Contact Name" type="email" v-model="contactName" class="form-control">
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="col-md-6">
                                <div class="position-relative form-group">
                                    <label for="email" class="">Email</label>
                                    <input name="email" id="email" placeholder="email"  type="text" class="form-control" v-model="email">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="position-relative form-group">
                                    <label for="phone" class="">Phone</label>
                                    <input name="phone" id="phone" placeholder="Phone number" type="text" v-model="phone" class="form-control">
                                </div>
                            </div>
                        </div>

                         <div class="form-row">
                            <div class="col-md-12">
                                <div class="position-relative form-group">
                                    <label for="phone" class="">Address</label>
                                    <textarea  name="address" id="address" placeholder="Address" type="text" v-model="address" class="form-control"> </textarea>
                                </div>
                            </div>
                        </div>

                       <div class="col-md-3">
                           <button type="submit" class="btn btn-block btn-lg btn-primary" >Submit</button>
                       </div>

                </form>
       

                    <div class="mb-3">
                    <div class="card-body"><h5 class="card-title">Client List </h5>
                        <table class="mb-0 table table-striped">
                            <thead>
                            <tr style="font-size:14px">
                                <th style="width:10%"> # </th>
                                <th style="width:30%">Client Name </th>
                                <th style="width:60%"> Client Address</th>
                            </tr>
                            </thead>
                            <tbody id="tbClient">
                                           
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js"></script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.26.0/axios.min.js" integrity="sha512-bPh3uwgU5qEMipS/VOmRqynnMXGGSRv+72H/N260MQeXZIK4PG48401Bsby9Nq5P5fz7hy5UGNmC/W1Z51h2GQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

 <script>
      const app = new Vue({
      el: '#app',
      data: {
        errors: [],
        name: null,
        contactName: '',
        email: null,
        phone:'',
        address: null
      },
      methods: {
        submitForm: function (e) {
           
           this.errors = [];
           
           const config = { headers: { 'Content-Type': 'application/json' } };
           var base_url = window.location.origin;
           const clientURL = base_url + "/api/Company/save-client";

           const clientData ={
               name : this.name,
               address : this.address,
               contactName:this.contactName,
               email : this.email,
               phone : this.phone
           };

            axios.post(clientURL, clientData, config)
            .then(response =>{ 

                 Swal.fire({
                    position: 'top-end',
                    icon: 'success',
                    title: 'Record has been added successfully!',
                    showConfirmButton: false,
                    timer: 1500
                })

                this.clearAll();
            })
            .catch(errors => {
                  Swal.fire({
                    position: 'top-end',
                    title: 'Error!',
                    text: 'Something went wrong.' + errorThrown.errorMessage,
                    icon: 'error',
                    confirmButtonText: 'Ok',
                })
            });

          e.preventDefault();
        },
        validFrom: function (email) {
    
        },
        clearAll : function(){
            this.name ="";
            this.email = "";
            this.phone ="";
            this.address ="";
            this.contactName ="";
        }
      }
    })
  </script>
 </div>
 


  

